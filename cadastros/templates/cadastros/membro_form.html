{% extends 'cadastros/base.html' %}

{% block title %}{{ form_title }}{% endblock %}

{% block content %}
<h1 class="mb-4">{{ form_title }}</h1>

<div class="card shadow-sm">
    <div class="card-body">
        <form method="post" novalidate>
            {% csrf_token %}
            
            {% if form.non_field_errors %}
                <div class="alert alert-danger">
                    {% for error in form.non_field_errors %}
                        <p class="mb-0">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <div class="row">
                <div class="col-lg-8">
                    <div class="card shadow-sm mb-4">
                        <div class="card-header"><h5 class="mb-0">Dados Pessoais</h5></div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="{{ form.nome_completo.id_for_label }}" class="form-label">{{ form.nome_completo.label }}</label>
                                {{ form.nome_completo }}
                                {% for error in form.nome_completo.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.data_nascimento.id_for_label }}" class="form-label">{{ form.data_nascimento.label }}</label>
                                    {{ form.data_nascimento }}
                                    {% for error in form.data_nascimento.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.sexo.id_for_label }}" class="form-label">{{ form.sexo.label }}</label>
                                    {{ form.sexo }}
                                    {% for error in form.sexo.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm mb-4" id="card-responsavel">
                        <div class="card-header"><h5 class="mb-0">Contato do Responsável</h5></div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="{{ form.nome_responsavel.id_for_label }}" class="form-label">{{ form.nome_responsavel.label }}</label>
                                {{ form.nome_responsavel }}
                                {% for error in form.nome_responsavel.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.telefone_responsavel.id_for_label }}" class="form-label">{{ form.telefone_responsavel.label }}</label>
                                    {{ form.telefone_responsavel }}
                                    {% for error in form.telefone_responsavel.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.email_responsavel.id_for_label }}" class="form-label">{{ form.email_responsavel.label }}</label>
                                    {{ form.email_responsavel }}
                                    {% for error in form.email_responsavel.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="card shadow-sm mb-4">
                        <div class="card-header"><h5 class="mb-0">Informações do Clube</h5></div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="{{ form.cargo.id_for_label }}" class="form-label">{{ form.cargo.label }}</label>
                                {{ form.cargo }}
                                {% for error in form.cargo.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>
                            <div class="mb-3">
                                <label for="{{ form.unidade.id_for_label }}" class="form-label">{{ form.unidade.label }}</label>
                                {{ form.unidade }}
                                {% for error in form.unidade.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>
                            <div class="mb-3">
                                <label for="{{ form.classe_atual.id_for_label }}" class="form-label">{{ form.classe_atual.label }}</label>
                                {{ form.classe_atual }}
                                {% for error in form.classe_atual.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>
                            <div class="form-check mb-3">
                                {{ form.ativo }}
                                <label class="form-check-label" for="{{ form.ativo.id_for_label }}">{{ form.ativo.label }}</label>
                            </div>
                        </div>
                    </div>
                    <div class="card shadow-sm mb-4">
                        <div class="card-header"><h5 class="mb-0">Acesso ao Sistema</h5></div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="{{ form.user.id_for_label }}" class="form-label">{{ form.user.label }}</label>
                                {{ form.user }}
                                <div class="form-text">Associe este perfil a um usuário de login (opcional).</div>
                                {% for error in form.user.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-3">
                <a href="{% url 'lista_membros' %}" class="btn btn-outline-secondary">Cancelar</a>
                <button type="submit" class="btn btn-primary" style="background-color: #003366;">Salvar Membro</button>
            </div>
        </form>
    </div>
</div>

<script>
    // ... (o script para adicionar classes e mostrar/esconder o card continua o mesmo)
</script>
{% endblock %}